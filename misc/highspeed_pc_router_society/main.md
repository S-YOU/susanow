
# 環境に対して自動最適化する高性能通信基盤

- Hiroki SHIROKURA
- @slankdev

## 背景

DPDK
NFV 多数VNFのサービスチェイニング
スレッドのpipeline構造の最適化の手作業

ターゲットは10GbE x4-8, 40GbE x4くらい
私が知っているDPDKの限界がそこであるので。
多くのNFViはVMを使う -> VMオーバヘッド
SSNはスレッドベースでのMostOptimalを目指す
VNFを追加したり減らしたりするタイミングでOptimization
トラフィックが増えたり, 減ったりするタイミングでOptimization
マルチコア, メニーコアの最適化
コア数がどんどん上昇することを前提
DPDKは全部再実装することで高性能IOの実現をした
VMオーバヘッドなどに対してはあとから対処している。
DPDKの最適化はスレッドチューニング


沖さん
コンテキストスイッチの抑制
Page faultを抑制するためのHugepages
ゼロコピー


自分
マルチコアのスケジュールは自分でや
フリースタンディング環境でない (ほかのライブラリが使える)

DPDKアプリケーション開発の定義

スレッドのデザイン
メモリコピーを少なく
効率良いルックアップ
スレッドのパイプライニングの定義

スレッドの部分を自動で最適化
NFの実装に必要な知識
あたり前だが実装するプロトコルの知識
高性能化に必要な知識
並列分散処理
ソフトウェアパイプライン
メモリコピー
排他制御
性能計測をしながらソフトウェアパイプラインの最適化,
NICの構成変更などをたくさん試して無駄を減らす

ソフトウェアパイプラインの最適化
-> 遅延と多重率の調節は
　自動化できるのでは？


## 設計

- スレッド管理の設計
- VNFの設計
- 動的自動最適化技術の設計
- 仮想ポートの実装
- 制御インターフェース

## 実装
## 評価
### なぜこのようなことが可能になったか

各ステージの性能の定義を結構無理やりやった。
一般的な構造ではない
ネットワークスタックのような通り抜けしない構造は想定していない
ルータやFirewallやIDSなどを想定
ターゲット設定を限定したことと、ユーザの開発部分をある程度
束縛することで実現した

## デモ

